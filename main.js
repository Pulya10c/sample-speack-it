!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);class n{constructor(){this.group=0,this.page=0,this.recognition=null,this.control=null,this.containerApp=null}async getWords(){const t=`https://afternoon-falls-25894.herokuapp.com/words?page=${this.page}&group=${this.group}`,e=await fetch(t);return await e.json()}async getTranslation(){const t=`https://translate.yandex.net/api/v1.5/tr.json/translate?key=trnsl.1.1.20200322T155651Z.de98a60e6a99185e.089aea4237b51c6db082c966f27a7895cd1e8b44&text=${this.word}&lang=en-ru`,e=await fetch(t);return(await e.json()).text[0]}async templateForBlockWord(t,e){this.word=t.word;const r=await this.getTranslation(),n=document.createElement("div");return n.setAttribute("data-word",""+e),n.className="word",n.innerHTML=`<span data-sound-number=${e} class="sound-word">\n    <i data-icon=${e} class="fas fa-volume-up"></i>\n    <audio data-sound=${e} class="audio" src="src/${t.audio}"></audio>\n    </span>\n       <div data-word-descriptions=${e} class="word-descriptions">\n           <p data-england-word-number=${e} class="england-word">${t.word}</p>\n           <p data-transcript-word=${e} class="transcript-word">${t.transcription}</p>\n           <p data-translate-number=${e} data-translate-img="src/${t.image}" class="translate-word">${r}</p>\n       </div>`,n}async getTranslationForListWords(t){return await Promise.all(t.map(async(t,e)=>await this.templateForBlockWord(t,e)))}async appendForDomListWords(t){this.listWords.append(...t),this.sectionWraper.append(this.listWords),n.addWordListIntScore(this.listWords)}async createNewListWords(){this.resetListWords();const t=await this.getWords();t.length=10;const e=await this.getTranslationForListWords(t);await this.appendForDomListWords(e),this.addEventHandlerForAudio()}createWordTranslationBlock(){this.wordTranslationBlock=document.createElement("div"),this.wordTranslationBlock.className="transcription-block",this.wordTranslationBlock.innerHTML='<div class="wrapper-image"><img class="source-img" src="src/files/blank.jpg"></div><span class="translation-word"></span>',this.containerApp.append(this.wordTranslationBlock)}resetListWords(){const t=document.querySelector(".list-words");t&&t.remove(),this.listWords=document.createElement("section"),this.listWords.className="list-words";const e=this.wordTranslationBlock.querySelector(".source-img").src;this.wordTranslationBlock.querySelector(".source-img").src=e.slice(0,e.indexOf("src"))+"src/files/blank.jpg",this.wordTranslationBlock.querySelector(".translation-word").textContent=""}getTranslationHTML(t){const e=t.attributes[1].value,r=this.wordTranslationBlock.querySelector(".source-img").src;this.wordTranslationBlock.querySelector(".source-img").src=`${r.slice(0,r.indexOf("src"))}${e}`,this.wordTranslationBlock.querySelector(".translation-word").textContent=t.textContent}addEventHandlerForAudio(){this.listWords.addEventListener("click",({target:t})=>{const e=t.attributes[0].value;[...document.querySelectorAll("[data-sound]")].find(t=>t.attributes[0].value===e).play();const r=[...document.querySelectorAll("[data-translate-number]")].find(t=>t.attributes[0].value===e);this.getTranslationHTML(r)})}highlightActiveGroupNavigation(){[...this.navigation.querySelectorAll("[data-number]")].forEach(t=>{t.classList.remove("active")}),[...this.navigation.querySelectorAll("[data-number]")].find(t=>(t.classList.remove("active"),+t.attributes[0].value==+this.group)).classList.add("active")}createPage(){this.containerApp=document.createElement("section"),this.containerApp.className="wrapper",this.navigationBlock=document.createElement("section"),this.navigationBlock.className="wrapper-navigation",this.navigation=document.createElement("ul"),this.navigation.className="page";const t=Array(6).fill(null).reduce((t,e,r)=>`${t}<li class="item-page"><span data-number="${r}" class="pointer">&#1010${r+2};</span></li>`,"");this.navigation.insertAdjacentHTML("afterbegin",t),this.resultSection=document.createElement("ul"),this.resultSection.className="check-result",this.navigationBlock.append(this.navigation,this.resultSection),this.containerApp.append(this.navigationBlock),document.body.append(this.containerApp),this.addHandlerchangeGroupe()}createButtonControl(){this.control=document.createElement("div"),this.control.className="button-wrapper",this.control.innerHTML='<button class="btn restart">Restart</button><button class="btn start">Start game</button><button class="btn result">Result</button>',this.containerApp.append(this.control),this.addHandlerClickButton()}addHandlerchangeGroupe(){this.navigation.addEventListener("click",({target:t})=>{if(!t.className.includes("pointer"))return;const e=+t.attributes[0].value;+this.group===e?this.page=29!==this.page?this.page+1:0:(this.page=0,this.group=e,this.highlightActiveGroupNavigation()),this.reserDefaultSpeackWord(),this.createNewListWords()})}addHandlerClickButton(){this.control.addEventListener("click",({target:t})=>{"btn start"===t.className&&(this.reserDefaultSpeackWord(),this.createRecognition()),"btn result"===t.className&&document.querySelector(".wrapper-score").classList.remove("hidden"),"btn restart"===t.className&&this.reserDefaultSpeackWord()})}createWordSection(){this.sectionWraper=document.createElement("div"),this.sectionWraper.className="section-word-wrapper",this.containerApp.append(this.sectionWraper)}createRecognition(){const t=window.SpeechRecognition||window.webkitSpeechRecognition;t?(this.recognition=new t,this.recognition.continuous=!0,this.recognition.start(),this.recognition.onstart=()=>{console.log("Voice recognition started. Try speaking into the microphone.")},this.wordTranslationBlock.querySelector(".translation-word").classList.add("speack-active"),this.recognition.onresult=t=>{const e=[...t.results].pop()[0].transcript;this.wordTranslationBlock.querySelector(".translation-word").textContent=e,this.chectSpeackWord(e),n.addWordListIntScore(this.listWords)}):console.log("Speech recognition not supported ðŸ˜¢")}addLike(){const t=document.createElement("li");t.className="star",t.innerHTML='<i class="far fa-thumbs-up"></i>',this.resultSection.append(t)}chectSpeackWord(t){[...this.listWords.querySelectorAll(".england-word")].forEach(e=>{e.textContent.toLocaleLowerCase().trim()===t.toLocaleLowerCase().trim()&&(e.parentElement.parentElement.classList.add("win"),this.changeImgForWord(e),this.addLike())})}changeImgForWord(t){const e=+t.attributes[0].value,r=[...this.listWords.querySelectorAll("[data-translate-img]")].find(t=>+t.attributes[0].value===e).attributes[1].value,n=this.wordTranslationBlock.querySelector(".source-img").src;this.wordTranslationBlock.querySelector(".source-img").src=`${n.slice(0,n.indexOf("src"))}${r}`}reserDefaultSpeackWord(){[...this.listWords.querySelectorAll(".word")].forEach(t=>{t.classList.remove("win")}),this.wordTranslationBlock.querySelector(".translation-word").classList.remove("speack-active"),this.wordTranslationBlock.querySelector(".translation-word").textContent="";const t=this.wordTranslationBlock.querySelector(".source-img").src;this.wordTranslationBlock.querySelector(".source-img").src=t.slice(0,t.indexOf("src"))+"src/files/blank.jpg",this.recognition&&(this.recognition.stop(),this.recognition=null)}addHandlerScoreMenu(){document.querySelector(".return").addEventListener("click",()=>{document.querySelector(".wrapper-score").classList.add("hidden")}),document.querySelector(".newGame").addEventListener("click",()=>{this.reserDefaultSpeackWord(),n.addWordListIntScore(this.listWords),document.querySelector(".wrapper-score").classList.add("hidden")})}static addWordListIntScore(t){const{win:e,dontKnow:r}=[...t.querySelectorAll(".word")].reduce((t,e)=>{const r=`<span class="resalt-word-translate">${e.querySelector(".england-word").textContent}</span>\n      <span>${e.querySelector(".transcript-word").textContent}</span>\n      <span>${e.querySelector(".translate-word").textContent}</span>`,n=document.createElement("div");return n.innerHTML=r,[...e.classList].includes("win")?t.win.push(n):t.dontKnow.push(n),t},{win:[],dontKnow:[]}),n=document.querySelector(".dntKnow"),o=document.querySelector(".know"),s=document.createElement("div");s.className="score-result-know";const a=`<p>Know : </p><div class = 'score-result correctly'><span>${e.length}</span></div>`;s.innerHTML=a;const i=document.createElement("div");i.className="score-result-dont-know";const c=` <p>Do not know : </p><div class = 'score-result error'><span>${r.length}</span></div>`;i.innerHTML=c,[...n.querySelectorAll("div")].forEach(t=>t.remove()),[...o.querySelectorAll("div")].forEach(t=>t.remove()),o.append(s),n.append(i),n.append(...r),o.append(...e)}init(){this.createPage(),this.createWordTranslationBlock(),this.createWordSection(),this.createButtonControl(),this.createNewListWords(),this.highlightActiveGroupNavigation(),this.addHandlerScoreMenu()}}r(1);(new n).init()},function(t,e){}]);